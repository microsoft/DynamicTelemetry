<p>public string HashFile(string imageName) { try { // 1. Log the start
of the hashing process LogStartingFileHash(m_logger, imageName);</p>
<pre><code>    // 2. Open the file and hash it
    using (FileStream fileStream = File.OpenRead(imageName))
    {
        string hashValue = Convert.ToBase64String(m_SHA256.ComputeHash(fileStream));

        // 3. Log the end of the hashing process
        LogEndFileHash(m_logger, imageName, hashValue);
        return hashValue;
    }
}
catch (Exception e)
{
    // Log any exceptions that occur
    ErrorHashing(m_logger, imageName, e);
    throw;
}</code></pre>
<p>}</p>
<p>[LoggerMessage(Level = LogLevel.Information, Message = “Starting
FileHash {fileName}.”)] static partial void LogStartingFileHash(ILogger
logger, string fileName);</p>
<p>[LoggerMessage(Level = LogLevel.Information, Message = “Ending
FileHash {fileName}, hash={hashValue}.”)] static partial void
LogEndFileHash(ILogger logger, string fileName, string hashValue);</p>
<p>[LoggerMessage(Level = LogLevel.Warning, Message = “Unable to hash
image {fileName}”)] static partial void ErrorHashing(ILogger logger,
string fileName, Exception e);</p>
